#:import SlideTransition kivy.uix.screenmanager.SlideTransition
#:import Factory kivy.factory.Factory


# MainPage:

WindowManager:
    ChooseRole:
    LogIn:
    Registration:
    MainPage:


<ChooseRole>:
    name: 'choose_role'

    BoxLayout:
        orientation: 'vertical'

        MDToolbar:
            title: 'Выберите роль:'
            elevation: 8
            specific_text_color: app.theme_cls.primary_light

        BoxLayout:
            orientation: 'vertical'
            spacing: '10dp'

            MDRectangleFlatButton:
                text: 'Заказчик'
                bold: True
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                on_press:
                    root.write_button_text(self)
                    root.manager.current = 'registration'
                    root.manager.transition.direction = 'left'

            MDRectangleFlatButton:
                text: 'Исполнитель'
                bold: True
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                on_press:
                    root.write_button_text(self)
                    root.manager.current = 'registration'
                    root.manager.transition.direction = 'left'

            MDRectangleFlatButton:
                text: 'Фирма'
                bold: True
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                on_press:
                    root.write_button_text(self)
                    root.manager.current = 'registration'
                    root.manager.transition.direction = 'left'
        BoxLayout:
            size_hint: 1, .5


        MDBottomAppBar:
            MDToolbar:
                mod: 'center'
                type: 'bottom'
                icon: 'location-enter'
                specific_text_color: app.theme_cls.primary_light
                on_action_button: root.go_to_login()

<LogIn>:
    name: 'login'
    padding: '20dp', '20dp', '20dp', '20dp'

    BoxLayout:
        orientation: 'vertical'

        MDToolbar:
            title: 'Вход:'
            elevation: 8
            specific_text_color: app.theme_cls.primary_light

        BoxLayout:
            size_hint: 1, 0.5

            MDLabel:
                id: login_title
                halign: 'center'
                color: (0, 0, 0, 1)
                text: root.message

        GridLayout:
            rows: 2
            cols: 1
            size_hint: 1, 1
            padding: '20dp', '20dp', '20dp', '20dp'

            MDTextField:
                hint_text: 'логин'
                helper_text: 'введите имя пользователя'
                helper_text_mode: 'on_focus'
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                icon_right: 'lead-pencil'
                icon_right_color: app.theme_cls.primary_color
                on_text: root.form_data['username'] = self.text


            MDTextField:
                hint_text: 'пароль'
                helper_text: 'введите пароль'
                helper_text_mode: 'on_focus'
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                password: True
                icon_right: 'lock-outline'
                icon_right_color: app.theme_cls.primary_color
                on_text: root.form_data['password'] = self.text


        MDBottomAppBar:
            MDToolbar:
                left_action_items: [['arrow-left', lambda x: root.go_back()]]
                mod: 'center'
                type: 'bottom'
                icon: 'location-enter'
                specific_text_color: app.theme_cls.primary_light
                on_action_button: root.validate_data(login_title)


<Registration>:
    name: 'registration'

    BoxLayout:
        orientation: 'vertical'

        MDToolbar:
            title: 'Регистрация:'
            elevation: 8
            specific_text_color: app.theme_cls.primary_light

        BoxLayout:
            size_hint: 1, .25

            Label:
                id: registration_label
                text: root.message

        ScrollView:
            GridLayout:
                cols: 1
                rows: 9
                padding: '20dp', '0dp', '20dp', '0dp'
                size_hint: 1, None
                spacing: '10dp'
                height: '400dp'

                MDTextField:
                    hint_text: 'имя пользователя'
                    helper_text: 'введите имя пользователя'
                    helper_text_mode: 'on_focus'
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    icon_right: 'lead-pencil'
                    icon_right_color: app.theme_cls.primary_color
                    on_text: root.form_data['username'] = self.text

                MDTextField:
                    hint_text: 'пароль'
                    helper_text: 'введите пароль'
                    password: True
                    helper_text_mode: 'on_focus'
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    icon_right: 'lock-outline'
                    icon_right_color: app.theme_cls.primary_color
                    on_text: root.form_data['password'] = self.text

                MDTextField:
                    hint_text: 'пароль повторно'
                    helper_text: 'введите пароль повторно'
                    password: True
                    helper_text_mode: 'on_focus'
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    icon_right: 'lock-outline'
                    icon_right_color: app.theme_cls.primary_color
                    on_text: root.form_data['re_password'] = self.text

                MDTextField:
                    hint_text: 'почта'
                    helper_text: 'введите почту'
                    helper_text_mode: 'on_focus'
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    icon_right: 'at'
                    icon_right_color: app.theme_cls.primary_color
                    on_text: root.form_data['email'] = self.text

                MDLabel:
                    text: 'Тип предоставляемых услуг:'
                    size_hint: .3, .25
                    halign: 'left'
                    theme_text_color: "Custom"
                    text_color: 0, 0, 0, .4

                GridLayout:
                    cols: 1
                    rows: 3
                    size_hint: 1, .25
                    spacing: '10dp'

                    BoxLayout:
                        size_hint: .5, 1

                        MDLabel:
                            id: client_role
                            text: 'первая'
                            halign: 'right'
                            theme_text_color: "Custom"
                            text_color: 0, 0, 0, .4
                        MDCheckbox:
                            pos_hint: {'center_x': .5, 'center_y': .5}
                            on_press: root.get_category_data(self, client_role)

                    BoxLayout:
                        size_hint: .5, 1

                        MDLabel:
                            id: worker_role
                            text: 'вторая'
                            halign: 'right'
                            theme_text_color: "Custom"
                            text_color: 0, 0, 0, .4
                        MDCheckbox:
                            pos_hint: {'center_x': .5, 'center_y': .5}
                            on_press: root.get_category_data(self, worker_role)

                    BoxLayout:
                        size_hint: .5, 1

                        MDLabel:
                            id: firm_role
                            text: 'третья'
                            halign: 'right'
                            theme_text_color: "Custom"
                            text_color: 0, 0, 0, .4
                        MDCheckbox:
                            pos_hint: {'center_x': .5, 'center_y': .5}
                            on_press: root.get_category_data(self, firm_role)

        MDBottomAppBar:
            MDToolbar:
                left_action_items: [['arrow-left', lambda x: root.go_back()]]
                mod: 'center'
                type: 'bottom'
                icon: 'location-enter'
                specific_text_color: app.theme_cls.primary_light
                on_action_button: root.validate_data(registration_label)


<MainPage>:
    name: 'main_page'

    BoxLayout:
        orientation: 'vertical'


        MDToolbar:
            title: 'Orders'
            elevation: 8
            specific_text_color: app.theme_cls.primary_light
            right_action_items: [['menu']]

        MDTabs:
            id: content

            OrdersTab:
                id: orders
                title: ''
                icon: 'home-outline'

            ProfileTab:
                id: profile
                title: ''
                icon: 'account'


<ProfileCard>:
    orientation: 'vertical'
    padding: '10dp'
    size_hint_y: None
    height: '800dp'

    MDGridLayout:
        cols: 2
        adaptive_height: True

        FitImage:
            source: 'images/unknown.png'
            size_hint: None, None
            height: '100dp'
            width: '100dp'
            pos_hint: {'top': 1}
            radius: 8, 8, 8, 8

        MDBoxLayout:
            orientation: 'vertical'
            adaptive_height: True
            padding: '6dp', '0dp', '0dp', '0dp'

            MDGridLayout:
                cols: 2
                adaptive_height: True

                MDLabel:
                    id: name
                    bold: True
                    size_hint_y: None
                    height: '30dp'
                    font_size: '24dp'
                MDIconButton:
                    icon: 'fountain-pen'
                    user_font_size: '15dp'

            MDGridLayout:
                cols: 2
                adaptive_height: True

                MDLabel:
                    id: phone_number
                    font_size: '14dp'
                MDIconButton:
                    icon: 'fountain-pen'
                    user_font_size: '15dp'

    MDGridLayout:
        cols: 2
        adaptive_height: True

        MDBoxLayout:
            orientation: 'vertical'
            MDLabel:
                text: 'Почта:'
                font_size: '12dp'
                bold: True
                size_hint_y: None
                height: '30dp'
            MDLabel:
                id: email
                font_size: '14dp'
        MDIconButton:
            icon: 'fountain-pen'
            user_font_size: '15dp'

        MDBoxLayout:
            orientation: 'vertical'
            MDLabel:
                text: 'Регион:'
                font_size: '12dp'
                bold: True
                size_hint_y: None
                height: '30dp'
            MDLabel:
                id: region
                font_size: '14dp'
        MDIconButton:
            icon: 'fountain-pen'
            user_font_size: '15dp'

        MDBoxLayout:
            orientation: 'vertical'
            MDLabel:
                text: 'Город:'
                font_size: '12dp'
                bold: True
                size_hint_y: None
                height: '30dp'
            MDLabel:
                id: city
                font_size: '14dp'
        MDIconButton:
            icon: 'fountain-pen'
            user_font_size: '15dp'

        MDBoxLayout:
            orientation: 'vertical'
            MDLabel:
                text: 'Юридическое лицо:'
                font_size: '12dp'
                bold: True
                size_hint_y: None
                height: '30dp'
            MDLabel:
                id: is_juridical
                font_size: '14dp'
        MDIconButton:
            icon: 'fountain-pen'
            user_font_size: '15dp'

        MDBoxLayout:
            orientation: 'vertical'
            adaptive_height: True
            MDLabel:
                text: 'Кратко о своей деятельности:'
                font_size: '12dp'
                bold: True
                size_hint_y: None
                height: '30dp'
            MDLabel:
                id: description
                font_size: '14dp'
                adaptive_height: True
        MDIconButton:
            icon: 'fountain-pen'
            user_font_size: '15dp'

        MDBoxLayout:
            orientation: 'vertical'
            MDLabel:
                text: 'Опыт работы:'
                font_size: '12dp'
                bold: True
                size_hint_y: None
                height: '30dp'
            MDLabel:
                id: work_experience
                font_size: '14dp'
        MDIconButton:
            icon: 'fountain-pen'
            user_font_size: '15dp'

        MDBoxLayout:
            orientation: 'vertical'
            MDLabel:
                text: 'Область работы:'
                font_size: '12dp'
                bold: True
                size_hint_y: None
                height: '30dp'
            MDLabel:
                id: category
                font_size: '14dp'
        MDIconButton:
            icon: 'fountain-pen'
            user_font_size: '15dp'

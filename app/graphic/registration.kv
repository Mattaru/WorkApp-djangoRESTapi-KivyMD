<Registration>:
    name: 'registration'

    MDBoxLayout:
        orientation: 'vertical'

        MDToolbar:
            title: 'Регистрация:'
            elevation: 8
            specific_text_color: 1, 1, 1, 1
            left_action_items: [['arrow-left', lambda x: root.go_back()]]

        ScrollView:
            MDGridLayout:
                cols: 1
                rows: 10
                padding: '10dp', '40dp', '10dp', '0dp'
                size_hint: 1, None
                spacing: '10dp'
                height: '700dp'

                MDTextField:
                    hint_text: 'имя пользователя'
                    helper_text: 'введите имя пользователя'
                    helper_text_mode: 'on_focus'
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    required: True
                    icon_right: 'lead-pencil'
                    icon_right_color: app.theme_cls.primary_color
                    on_text: root.form_data['username'] = self.text

                MDTextField:
                    hint_text: 'имя'
                    helper_text: 'введите ваше имя'
                    helper_text_mode: 'on_focus'
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    required: True
                    icon_right: 'lead-pencil'
                    icon_right_color: app.theme_cls.primary_color
                    on_text: root.form_data['first_name'] = self.text

                MDTextField:
                    hint_text: 'фамилия'
                    helper_text: 'введите вашу фамилию'
                    helper_text_mode: 'on_focus'
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    required: True
                    icon_right: 'lead-pencil'
                    icon_right_color: app.theme_cls.primary_color
                    on_text: root.form_data['last_name'] = self.text

                ClickableTextFieldRIcon:
                    pos_hint: {"center_x": .5, "center_y": .5}

                    MDTextField:
                        id: pass_field
                        hint_text: 'пароль'
                        helper_text: 'введите пароль'
                        password: True
                        helper_text_mode: 'on_focus'
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                        required: True
                        on_text: root.form_data['password'] = self.text
                        on_focus: 
                            pass_btn.text_color = app.theme_cls.primary_color if self.focus else (0, 0, 0, .4)

                    MDIconButton:
                        id: pass_btn
                        icon: "eye-off"
                        ripple_scale: .5
                        pos_hint: {"center_y": .65}
                        pos: pass_field.width - self.width + dp(3), 0
                        theme_text_color: "Custom"
                        text_color: 0, 0, 0, .4 
                        on_release:
                            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
                            pass_field.password = False if pass_field.password is True else True

                ClickableTextFieldRIcon:
                    pos_hint: {"center_x": .5, "center_y": .5}

                    MDTextField:
                        id: re_pass_field
                        hint_text: 'пароль повторно'
                        helper_text: 'введите пароль повторно'
                        password: True
                        helper_text_mode: 'on_focus'
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                        required: True
                        on_text: root.form_data['re_password'] = self.text
                        on_focus: 
                            re_pass_btn.text_color = app.theme_cls.primary_color if self.focus else (0, 0, 0, .4)

                    MDIconButton:
                        id: re_pass_btn
                        icon: "eye-off"
                        ripple_scale: .5
                        pos_hint: {"center_y": .65}
                        pos: re_pass_field.width - self.width + dp(3), 0
                        theme_text_color: "Custom"
                        text_color: 0, 0, 0, .4
                        on_release:
                            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
                            re_pass_field.password = False if re_pass_field.password is True else True

                MDTextField:
                    hint_text: 'почта'
                    helper_text: 'введите почту'
                    helper_text_mode: 'on_focus'
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    required: True
                    icon_right: 'email'
                    icon_right_color: app.theme_cls.primary_color
                    on_text: root.form_data['email'] = self.text

                MDGridLayout:
                    id: categories_box
                    cols: 2

                    MDLabel:
                        id: cat_field
                        text: 'Тип услуг:'
                        theme_text_color: "Custom"
                        text_color: 0, 0, 0, 1

                    MDRoundFlatIconButton:
                        id: cat_add_btn
                        icon: "plus-circle"
                        text: "изменить"
                        theme_text_color: "Custom"
                        text_color: 0, 0, 0, 1
                        line_color: 0, 0, 0, 0.4
                        icon_color: 0, 0, 0, 0.4
                        on_release: root.show_dialog()
                
                MDGridLayout:     
                    cols: 1
                    size_hint_y: None
                    height: '200dp'

                    ScrollView:
                        MDList:
                            id: categories
                            size_hint_y: None
                            adaptive_height: True  

        MDBottomAppBar:
            md_bg_color: 1, 1, 1, 0
            
            MDToolbar:
                mod: 'center'
                type: 'bottom'
                icon: 'location-enter'
                specific_text_color: 1, 1, 1, 1
                on_action_button: root.validate_data()


<ServiceBox>:


<ClickableTextFieldRIcon@MDRelativeLayout>:


<CategoryListItem>:
    text_color: 0, 0, 0, .4


<CategoriesDialogContent>:
    cols: 1
    size_hint_y: None
    height: '300dp'

    ScrollView:
        MDBoxLayout:
            id: categories_box
            orientation: 'vertical'
            size_hint_y: None
            adaptive_height: True      


<CategoriesDialogExpansionContent>:
    cols: 1
    adaptive_height: True


<ChooseCategoriesContent>:
    on_release: 
        root.active_switch(check)
        root.get_cat_data(self, check)

    MDCheckbox:
        id: check
        size_hint: None, None
        size: "16dp", "16dp"
        pos_hint: {'center_x': .05, 'center_y': .5}   
